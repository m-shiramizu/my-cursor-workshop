# 商品管理UI 仕様書 (Streamlit)

## 1. 概要

本ドキュメントは、既存のFastAPI商品管理API（FastAPI Product Management API）を利用した、Streamlit製Webユーザーインターフェースの設計仕様を定義します。
目的は、商品在庫管理の担当者（初心者）が直感的にかつ簡単に商品データの登録と個別の商品検索を行えるようにすることです。
既存のAPIエンドポイントのみを使用し、新たなAPI機能の追加は行いません。ワークショップ時間内（約20分）で実装可能な範囲に限定します。

## 2. 想定ユーザー

*   商品在庫の登録、確認を行う会社の担当者。
*   プログラミングや複雑なシステム操作に不慣れな初心者。
*   「シンプルで迷わない」操作性を重視します。

## 3. 実装済みAPIエンドポイント

本UIが利用するAPIエンドポイントは以下の通りです。

*   **`GET /health`**: APIの稼働状態を確認します。
*   **`POST /items`**: 新しい商品を登録します。
    *   リクエストボディ: `{"name": "string", "price": float}`
    *   レスポンス: `{"id": int, "name": "string", "price": float, "created_at": "datetime"}`
*   **`GET /items/{item_id}`**: 指定されたIDの商品を取得します。
    *   パスパラメータ: `item_id` (int)
    *   レスポンス: `{"id": int, "name": "string", "price": float, "created_at": "datetime"}` または 404 Not Found

**注意:** 現在のAPIでは、全商品の一覧取得（`GET /items`）や、商品の更新、削除機能は提供されていません。そのため、本UIではこれらの機能は実装されません。

## 4. UI画面と機能詳細

Streamlitのページ（またはセクション）として以下の機能を実装します。

### 4.1. 商品登録画面 (Product Registration)

*   **目的:** 新しい商品をシステムに登録します。
*   **レイアウト:**
    *   画面上部にタイトル (`st.title`) と説明文を表示。
    *   商品名 (`name`) と価格 (`price`) の入力フィールド (`st.text_input`, `st.number_input`) を配置。
    *   「商品登録」ボタン (`st.button`) を配置。
*   **入力値:**
    *   **商品名 (Name):** テキスト入力。必須。
    *   **価格 (Price):** 数値入力。必須、0より大きい数値。
*   **操作:**
    1.  ユーザーが商品名と価格を入力。
    2.  「商品登録」ボタンをクリック。
    3.  UI側で基本的な入力チェック（空でないか、数値か、正の数か）を実施し、問題があればエラーメッセージ (`st.error`) を表示。
    4.  問題なければ `POST /items` APIを呼び出す。
    5.  **API呼び出し成功時:**
        *   「商品が正常に登録されました！」といった成功メッセージ (`st.success`) と、登録された商品の詳細情報（ID, 名前, 価格, 作成日時）を表示。
        *   入力フォームをクリア。
    6.  **API呼び出し失敗時（バリデーションエラー等）:**
        *   APIから返されたエラーメッセージ (`HTTPException` の詳細メッセージなど) をユーザーに分かりやすく表示 (`st.error`)。

### 4.2. 商品検索画面 (Product Search by ID)

*   **目的:** 特定の商品IDに基づいて商品を検索し、その詳細を表示します。
*   **レイアウト:**
    *   画面上部にタイトル (`st.title`) と説明文を表示。
    *   商品ID (`item_id`) の入力フィールド (`st.number_input` または `st.text_input` を数値に変換) を配置。
    *   「商品検索」ボタン (`st.button`) を配置。
*   **入力値:**
    *   **商品ID (Product ID):** 数値入力。必須。
*   **操作:**
    1.  ユーザーが商品IDを入力。
    2.  「商品検索」ボタンをクリック。
    3.  UI側で基本的な入力チェック（数値であるか）を実施し、問題があればエラーメッセージを表示。
    4.  問題なければ `GET /items/{item_id}` APIを呼び出す。
    5.  **API呼び出し成功時:**
        *   検索された商品の詳細情報（ID, 名前, 価格, 作成日時）を表示。
    6.  **API呼び出し失敗時（404 Not Found等）:**
        *   「指定されたIDの商品は見つかりませんでした。」といったメッセージ (`st.warning` または `st.error`) を表示。

### 4.3. APIステータス表示 (API Status)

*   **目的:** バックエンドAPIが正常に稼働しているかを確認します。
*   **レイアウト:**
    *   サイドバーまたはフッターに簡潔に表示。
*   **操作:**
    1.  アプリケーション起動時に `GET /health` APIを呼び出す。
    2.  **API稼働時:** 「APIステータス: オンライン ✅」といった表示 (`st.success`)。
    3.  **API停止時:** 「APIステータス: オフライン ❌ (APIが起動していません)」といった表示 (`st.error`)。

## 5. UIの構成要素 (Streamlit Components)

*   `st.title()` / `st.header()` / `st.subheader()`: 画面タイトルやセクションタイトル
*   `st.text_input()`: テキスト入力
*   `st.number_input()`: 数値入力
*   `st.button()`: ボタン
*   `st.write()` / `st.markdown()`: 情報表示
*   `st.success()` / `st.info()` / `st.warning()` / `st.error()`: メッセージ表示
*   `st.form()`: 入力フォームのグループ化（オプション）

## 6. 実装上の考慮事項（20分ワークショップ向け）

*   **シンプルさの追求:** 複雑なレイアウトや多数のコンポーネントは避け、必要最低限の機能に絞ります。
*   **エラーハンドリング:** APIからのエラーレスポンスをそのまま表示するのではなく、ユーザーフレンドリーなメッセージに変換します。
*   **データフロー:**
    *   StreamlitアプリからFastAPIへのHTTPリクエストには `httpx` などのライブラリを使用することを想定。
    *   StreamlitのState管理 (`st.session_state`) を活用して、フォーム入力値や表示データを保持することを検討。
*   **API URL:** FastAPIは通常 `http://localhost:8000` で稼働することを前提とします。

## 7. 今後の拡張（本UI仕様の範囲外）

*   全商品の一覧表示機能 (API側で `GET /items` が必要)
*   商品情報の更新、削除機能 (API側で `PUT`/`PATCH`/`DELETE /items/{item_id}` が必要)
*   在庫数管理機能
*   より高度な検索・フィルタリング・ソート機能
*   ユーザー認証・認可 